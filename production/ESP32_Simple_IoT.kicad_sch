(kicad_sch (version 20230121) (generator eeschema)

  (uuid 5d4a7f6a-8b2c-4d3e-9f1a-2b8c7e6f5a4b)

  (paper "A4")

  (title_block
    (title "ESP32 Simple IoT Switch")
    (date "2026-01-16")
    (rev "1.0")
    (company "Sarlls")
    (comment 1 "Simplified design addressing Jordan Lake review")
    (comment 2 "USB powered, relay control, WiFi/BLE enabled")
  )

  (lib_symbols
    (symbol "MCU_Module:ESP32-WROOM-32" (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 20.32 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "ESP32-WROOM-32" (at 0 17.78 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "RF_Module:ESP32-WROOM-32" (at 0 -40.64 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "https://www.espressif.com/sites/default/files/documentation/esp32-wroom-32_datasheet_en.pdf" (at 0 -43.18 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "LCSC" "C82899" (at 0 -45.72 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "ESP32-WROOM-32_0_1"
        (rectangle (start -12.7 16.51) (end 12.7 -16.51)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
      )
      (symbol "ESP32-WROOM-32_1_1"
        (pin power_in line (at 0 -19.05 90) (length 2.54)
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 0 19.05 270) (length 2.54)
          (name "3V3" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -15.24 12.7 0) (length 2.54)
          (name "EN" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 -12.7 180) (length 2.54)
          (name "IO0" (effects (font (size 1.27 1.27))))
          (number "25" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 10.16 180) (length 2.54)
          (name "TXD0" (effects (font (size 1.27 1.27))))
          (number "35" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 7.62 180) (length 2.54)
          (name "RXD0" (effects (font (size 1.27 1.27))))
          (number "34" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 2.54 180) (length 2.54)
          (name "IO4" (effects (font (size 1.27 1.27))))
          (number "26" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 0 180) (length 2.54)
          (name "IO5" (effects (font (size 1.27 1.27))))
          (number "29" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 0 -19.05 90) (length 2.54) hide
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "38" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 0 -19.05 90) (length 2.54) hide
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "39" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Regulator_Linear:AMS1117-3.3" (in_bom yes) (on_board yes)
      (property "Reference" "U" (at -3.81 3.175 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "AMS1117-3.3" (at 0 3.175 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "Package_TO_SOT_SMD:SOT-223-3_TabPin2" (at 0 5.08 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "http://www.advanced-monolithic.com/pdf/ds1117.pdf" (at 0 7.62 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "LCSC" "C6186" (at 0 10.16 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "AMS1117-3.3_0_1"
        (rectangle (start -5.08 1.905) (end 5.08 -5.08)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
      )
      (symbol "AMS1117-3.3_1_1"
        (pin power_out line (at 0 -7.62 90) (length 2.54)
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin power_out line (at 7.62 0 180) (length 2.54)
          (name "VO" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at -7.62 0 0) (length 2.54)
          (name "VI" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Interface_USB:CP2102N-A02-GQFN28" (in_bom yes) (on_board yes)
      (property "Reference" "U" (at -10.16 21.59 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "CP2102N-A02-GQFN28" (at 2.54 21.59 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "Package_DFN_QFN:QFN-28-1EP_5x5mm_P0.5mm_EP3.35x3.35mm" (at 2.54 -21.59 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "Datasheet" "https://www.silabs.com/documents/public/data-sheets/cp2102n-datasheet.pdf" (at -2.54 26.67 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "LCSC" "C6568" (at 0 -24.13 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "CP2102N-A02-GQFN28_0_1"
        (rectangle (start -10.16 20.32) (end 10.16 -20.32)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
      )
      (symbol "CP2102N-A02-GQFN28_1_1"
        (pin power_in line (at 0 22.86 270) (length 2.54)
          (name "VDD" (effects (font (size 1.27 1.27))))
          (number "6" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 0 -22.86 90) (length 2.54)
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -12.7 15.24 0) (length 2.54)
          (name "D+" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -12.7 12.7 0) (length 2.54)
          (name "D-" (effects (font (size 1.27 1.27))))
          (number "5" (effects (font (size 1.27 1.27))))
        )
        (pin output line (at 12.7 15.24 180) (length 2.54)
          (name "TXD" (effects (font (size 1.27 1.27))))
          (number "26" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at 12.7 12.7 180) (length 2.54)
          (name "RXD" (effects (font (size 1.27 1.27))))
          (number "25" (effects (font (size 1.27 1.27))))
        )
        (pin output line (at 12.7 7.62 180) (length 2.54)
          (name "DTR" (effects (font (size 1.27 1.27))))
          (number "27" (effects (font (size 1.27 1.27))))
        )
        (pin output line (at 12.7 5.08 180) (length 2.54)
          (name "RTS" (effects (font (size 1.27 1.27))))
          (number "28" (effects (font (size 1.27 1.27))))
        )
        (pin power_out line (at -12.7 -10.16 0) (length 2.54)
          (name "VBUS" (effects (font (size 1.27 1.27))))
          (number "8" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Transistor_BJT:BC817" (in_bom yes) (on_board yes)
      (property "Reference" "Q" (at 5.08 1.905 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "BC817" (at 5.08 0 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "Package_TO_SOT_SMD:SOT-23" (at 5.08 -1.905 0)
        (effects (font (size 1.27 1.27) italic) (justify left) hide)
      )
      (property "Datasheet" "https://www.onsemi.com/pub/Collateral/BC817-D.pdf" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "LCSC" "C8664" (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "BC817_0_1"
        (polyline
          (pts
            (xy 0.635 0.635)
            (xy 2.54 2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0.635 -0.635)
            (xy 2.54 -2.54)
            (xy 2.54 -2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0.635 1.905)
            (xy 0.635 -1.905)
            (xy 0.635 -1.905)
          )
          (stroke (width 0.508) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 1.27 -1.778)
            (xy 1.778 -1.27)
            (xy 2.286 -2.286)
            (xy 1.27 -1.778)
            (xy 1.27 -1.778)
          )
          (stroke (width 0) (type default))
          (fill (type outline))
        )
        (circle (center 1.27 0) (radius 2.8194)
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
      )
      (symbol "BC817_1_1"
        (pin passive line (at 2.54 -5.08 90) (length 2.54)
          (name "E" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -5.08 0 0) (length 5.715)
          (name "B" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 2.54 5.08 270) (length 2.54)
          (name "C" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Relay:SANYOU_SRD_Form_C" (in_bom yes) (on_board yes)
      (property "Reference" "K" (at 8.89 8.89 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "SRD-05VDC-SL-C" (at 8.89 6.35 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "Relay_THT:Relay_SPDT_SANYOU_SRD_Series_Form_C" (at 8.89 3.81 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "Datasheet" "https://www.songle.com/products/pdf/50.pdf" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "LCSC" "C35449" (at 0 -2.54 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "SANYOU_SRD_Form_C_0_0"
        (rectangle (start -3.81 3.81) (end 3.81 -3.81)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
        (polyline
          (pts
            (xy -3.81 -1.27)
            (xy -2.794 -1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -3.81 1.27)
            (xy -2.794 1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -2.794 -1.27)
            (xy -2.032 1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -0.508 1.524)
            (xy 0.508 1.524)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 0.762)
            (xy 0 1.524)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (rectangle (start -1.016 0.762) (end 1.016 -0.762)
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (arc (start -0.508 -0.762) (mid 0 -1.27) (end 0.508 -0.762)
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "SANYOU_SRD_Form_C_1_1"
        (pin passive line (at 0 -6.35 90) (length 2.54)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 6.35 270) (length 2.54)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -6.35 -1.27 0) (length 2.54)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -6.35 1.27 0) (length 2.54)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 6.35 0 180) (length 2.54)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "5" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Diode:1N4007" (in_bom yes) (on_board yes)
      (property "Reference" "D" (at 0 2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "1N4007" (at 0 -2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Diode_THT:D_DO-41_SOD81_P10.16mm_Horizontal" (at 0 -4.445 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "https://www.vishay.com/docs/88503/1n4001.pdf" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "LCSC" "C727110" (at 0 -6.35 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "1N4007_0_1"
        (polyline
          (pts
            (xy 1.27 0)
            (xy -1.27 0)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 1.27 1.27)
            (xy 1.27 -1.27)
            (xy -1.27 0)
            (xy 1.27 1.27)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -1.27 1.27)
            (xy -1.27 -1.27)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
      )
      (symbol "1N4007_1_1"
        (pin passive line (at -3.81 0 0) (length 2.54)
          (name "K" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 3.81 0 180) (length 2.54)
          (name "A" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Device:C" (in_bom yes) (on_board yes)
      (property "Reference" "C" (at 0.635 2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "C" (at 0.635 -2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "Capacitor_SMD:C_0805_2012Metric" (at 0.9652 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "C_0_1"
        (polyline
          (pts
            (xy -2.032 -0.762)
            (xy 2.032 -0.762)
          )
          (stroke (width 0.508) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -2.032 0.762)
            (xy 2.032 0.762)
          )
          (stroke (width 0.508) (type default))
          (fill (type none))
        )
      )
      (symbol "C_1_1"
        (pin passive line (at 0 3.81 270) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Device:R" (in_bom yes) (on_board yes)
      (property "Reference" "R" (at 2.032 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "R" (at 0 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Resistor_SMD:R_0805_2012Metric" (at -1.778 0 90)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "R_0_1"
        (rectangle (start -1.016 -2.54) (end 1.016 2.54)
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
      )
      (symbol "R_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Device:LED" (in_bom yes) (on_board yes)
      (property "Reference" "D" (at 0 2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "LED" (at 0 -2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "LED_SMD:LED_0805_2012Metric" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "LED_0_1"
        (polyline
          (pts
            (xy -1.27 -1.27)
            (xy -1.27 1.27)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -1.27 0)
            (xy 1.27 0)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 1.27 -1.27)
            (xy 1.27 1.27)
            (xy -1.27 0)
            (xy 1.27 -1.27)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -3.048 -1.27)
            (xy -4.572 -2.794)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -1.778 -1.27)
            (xy -3.302 -2.794)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -3.048 -2.794)
            (xy -3.556 -2.286)
            (xy -3.81 -2.794)
            (xy -3.048 -2.794)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -1.778 -2.794)
            (xy -2.286 -2.286)
            (xy -2.54 -2.794)
            (xy -1.778 -2.794)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "LED_1_1"
        (pin passive line (at -3.81 0 0) (length 2.54)
          (name "K" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 3.81 0 180) (length 2.54)
          (name "A" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Switch:SW_Push" (in_bom yes) (on_board yes)
      (property "Reference" "SW" (at 1.27 6.35 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "SW_Push" (at 0 -1.524 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Button_Switch_SMD:SW_SPST_TL3342" (at 0 5.08 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "SW_Push_0_1"
        (circle (center -2.032 0) (radius 0.508)
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 1.27)
            (xy 0 3.048)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -2.54 1.27)
            (xy 2.54 1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (circle (center 2.032 0) (radius 0.508)
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "SW_Push_1_1"
        (pin passive line (at -5.08 0 0) (length 2.54)
          (name "1" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 5.08 0 180) (length 2.54)
          (name "2" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Connector:USB_C_Receptacle_USB2.0" (in_bom yes) (on_board yes)
      (property "Reference" "J" (at -10.16 19.05 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "USB_C_Receptacle" (at 10.16 19.05 0)
        (effects (font (size 1.27 1.27)) (justify right))
      )
      (property "Footprint" "Connector_USB:USB_C_Receptacle_GCT_USB4105-xx-A_16P_TopMnt_Horizontal" (at 3.81 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "LCSC" "C165948" (at 0 -19.05 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "USB_C_Receptacle_USB2.0_0_0"
        (rectangle (start -10.16 17.78) (end 10.16 -17.78)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
      )
      (symbol "USB_C_Receptacle_USB2.0_1_1"
        (pin power_out line (at 0 20.32 270) (length 2.54)
          (name "VBUS" (effects (font (size 1.27 1.27))))
          (number "A4" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 12.7 7.62 180) (length 2.54)
          (name "D+" (effects (font (size 1.27 1.27))))
          (number "A6" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 12.7 5.08 180) (length 2.54)
          (name "D-" (effects (font (size 1.27 1.27))))
          (number "A7" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 0 -20.32 90) (length 2.54)
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "A1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -12.7 0 0) (length 2.54)
          (name "SHIELD" (effects (font (size 1.27 1.27))))
          (number "S1" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Connector_Generic:Conn_01x02" (in_bom yes) (on_board yes)
      (property "Reference" "J" (at 0 2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "Conn_01x02" (at 0 -5.08 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Connector_Phoenix_MC:PhoenixContact_MC_1,5_2-G-3.81_1x02_P3.81mm_Horizontal" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "LCSC" "C8269" (at 0 -7.62 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "Conn_01x02_1_1"
        (rectangle (start -2.54 1.27) (end 2.54 -3.81)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
        (pin passive line (at -5.08 0 0) (length 2.54)
          (name "Pin_1" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -5.08 -2.54 0) (length 2.54)
          (name "Pin_2" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Device:Ferrite_Bead" (in_bom yes) (on_board yes)
      (property "Reference" "FB" (at -1.016 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "Ferrite_Bead" (at 1.778 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Inductor_SMD:L_0805_2012Metric" (at -1.016 0 90)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "Ferrite_Bead_0_1"
        (rectangle (start -1.016 2.54) (end 1.016 -2.54)
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -2.286 0.254)
            (xy 2.286 0.254)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -2.286 -0.254)
            (xy 2.286 -0.254)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "Ferrite_Bead_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:GND" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (at 0 -6.35 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "GND" (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "GND_0_1"
        (polyline
          (pts
            (xy 0 0)
            (xy 0 -1.27)
            (xy 1.27 -1.27)
            (xy 0 -2.54)
            (xy -1.27 -1.27)
            (xy 0 -1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "GND_1_1"
        (pin power_in line (at 0 0 270) (length 0) hide
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:+3V3" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "+3V3" (at 0 3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "+3V3_0_1"
        (polyline
          (pts
            (xy -0.762 1.27)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 0)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 2.54)
            (xy 0.762 1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "+3V3_1_1"
        (pin power_in line (at 0 0 90) (length 0) hide
          (name "+3V3" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:+5V" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "+5V" (at 0 3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "+5V_0_1"
        (polyline
          (pts
            (xy -0.762 1.27)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 0)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 2.54)
            (xy 0.762 1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "+5V_1_1"
        (pin power_in line (at 0 0 90) (length 0) hide
          (name "+5V" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )

  ;; ===== POWER SUPPLY SECTION =====
  ;; USB-C Connector
  (symbol (lib_id "Connector:USB_C_Receptacle_USB2.0") (at 38.1 63.5 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0001-0001-000000000001)
    (property "Reference" "J1" (at 38.1 41.91 0))
    (property "Value" "USB_C" (at 38.1 44.45 0))
    (property "Footprint" "Connector_USB:USB_C_Receptacle_GCT_USB4105-xx-A_16P_TopMnt_Horizontal" (at 41.91 63.5 0))
    (pin "A4" (uuid 10000001-0001-0001-0001-000000000011))
    (pin "A6" (uuid 10000001-0001-0001-0001-000000000012))
    (pin "A7" (uuid 10000001-0001-0001-0001-000000000013))
    (pin "A1" (uuid 10000001-0001-0001-0001-000000000014))
    (pin "S1" (uuid 10000001-0001-0001-0001-000000000015))
  )

  ;; Ferrite Bead
  (symbol (lib_id "Device:Ferrite_Bead") (at 63.5 43.18 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0001-0002-000000000001)
    (property "Reference" "FB1" (at 63.5 38.1 0))
    (property "Value" "Ferrite_Bead" (at 63.5 40.64 0))
    (property "Footprint" "Inductor_SMD:L_0805_2012Metric" (at 63.5 43.18 0))
    (pin "1" (uuid 10000001-0001-0001-0002-000000000011))
    (pin "2" (uuid 10000001-0001-0001-0002-000000000012))
  )

  ;; Input capacitor 10uF
  (symbol (lib_id "Device:C") (at 76.2 50.8 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0001-0003-000000000001)
    (property "Reference" "C1" (at 78.74 48.26 0))
    (property "Value" "10uF" (at 78.74 53.34 0))
    (property "Footprint" "Capacitor_SMD:C_0805_2012Metric" (at 77.1652 54.61 0))
    (property "LCSC" "C15850" (at 76.2 50.8 0))
    (pin "1" (uuid 10000001-0001-0001-0003-000000000011))
    (pin "2" (uuid 10000001-0001-0001-0003-000000000012))
  )

  ;; AMS1117-3.3 Voltage Regulator
  (symbol (lib_id "Regulator_Linear:AMS1117-3.3") (at 91.44 43.18 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0001-0004-000000000001)
    (property "Reference" "U2" (at 91.44 35.56 0))
    (property "Value" "AMS1117-3.3" (at 91.44 38.1 0))
    (property "Footprint" "Package_TO_SOT_SMD:SOT-223-3_TabPin2" (at 91.44 38.1 0))
    (property "LCSC" "C6186" (at 91.44 43.18 0))
    (pin "1" (uuid 10000001-0001-0001-0004-000000000011))
    (pin "2" (uuid 10000001-0001-0001-0004-000000000012))
    (pin "3" (uuid 10000001-0001-0001-0004-000000000013))
  )

  ;; Output capacitor 10uF
  (symbol (lib_id "Device:C") (at 106.68 50.8 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0001-0005-000000000001)
    (property "Reference" "C2" (at 109.22 48.26 0))
    (property "Value" "10uF" (at 109.22 53.34 0))
    (property "Footprint" "Capacitor_SMD:C_0805_2012Metric" (at 107.6452 54.61 0))
    (property "LCSC" "C15850" (at 106.68 50.8 0))
    (pin "1" (uuid 10000001-0001-0001-0005-000000000011))
    (pin "2" (uuid 10000001-0001-0001-0005-000000000012))
  )

  ;; Decoupling capacitor 100nF
  (symbol (lib_id "Device:C") (at 116.84 50.8 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0001-0006-000000000001)
    (property "Reference" "C3" (at 119.38 48.26 0))
    (property "Value" "100nF" (at 119.38 53.34 0))
    (property "Footprint" "Capacitor_SMD:C_0805_2012Metric" (at 117.8052 54.61 0))
    (property "LCSC" "C49678" (at 116.84 50.8 0))
    (pin "1" (uuid 10000001-0001-0001-0006-000000000011))
    (pin "2" (uuid 10000001-0001-0001-0006-000000000012))
  )

  ;; ===== ESP32 MODULE SECTION =====
  ;; ESP32-WROOM-32
  (symbol (lib_id "MCU_Module:ESP32-WROOM-32") (at 165.1 101.6 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0002-0001-000000000001)
    (property "Reference" "U1" (at 165.1 78.74 0))
    (property "Value" "ESP32-WROOM-32" (at 165.1 81.28 0))
    (property "Footprint" "RF_Module:ESP32-WROOM-32" (at 165.1 142.24 0))
    (property "LCSC" "C82899" (at 165.1 101.6 0))
    (pin "1" (uuid 10000001-0001-0002-0001-000000000011))
    (pin "2" (uuid 10000001-0001-0002-0001-000000000012))
    (pin "3" (uuid 10000001-0001-0002-0001-000000000013))
    (pin "25" (uuid 10000001-0001-0002-0001-000000000025))
    (pin "35" (uuid 10000001-0001-0002-0001-000000000035))
    (pin "34" (uuid 10000001-0001-0002-0001-000000000034))
    (pin "26" (uuid 10000001-0001-0002-0001-000000000026))
    (pin "29" (uuid 10000001-0001-0002-0001-000000000029))
    (pin "38" (uuid 10000001-0001-0002-0001-000000000038))
    (pin "39" (uuid 10000001-0001-0002-0001-000000000039))
  )

  ;; EN pullup resistor 10K
  (symbol (lib_id "Device:R") (at 139.7 83.82 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0002-0002-000000000001)
    (property "Reference" "R1" (at 141.732 83.82 0))
    (property "Value" "10K" (at 139.7 83.82 90))
    (property "Footprint" "Resistor_SMD:R_0805_2012Metric" (at 137.922 83.82 90))
    (property "LCSC" "C17414" (at 139.7 83.82 0))
    (pin "1" (uuid 10000001-0001-0002-0002-000000000011))
    (pin "2" (uuid 10000001-0001-0002-0002-000000000012))
  )

  ;; EN RC delay capacitor 100nF
  (symbol (lib_id "Device:C") (at 139.7 96.52 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0002-0003-000000000001)
    (property "Reference" "C4" (at 142.24 93.98 0))
    (property "Value" "100nF" (at 142.24 99.06 0))
    (property "Footprint" "Capacitor_SMD:C_0805_2012Metric" (at 140.6652 100.33 0))
    (property "LCSC" "C49678" (at 139.7 96.52 0))
    (pin "1" (uuid 10000001-0001-0002-0003-000000000011))
    (pin "2" (uuid 10000001-0001-0002-0003-000000000012))
  )

  ;; IO0/BOOT pullup resistor 10K
  (symbol (lib_id "Device:R") (at 193.04 107.95 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0002-0004-000000000001)
    (property "Reference" "R2" (at 195.072 107.95 0))
    (property "Value" "10K" (at 193.04 107.95 90))
    (property "Footprint" "Resistor_SMD:R_0805_2012Metric" (at 191.262 107.95 90))
    (property "LCSC" "C17414" (at 193.04 107.95 0))
    (pin "1" (uuid 10000001-0001-0002-0004-000000000011))
    (pin "2" (uuid 10000001-0001-0002-0004-000000000012))
  )

  ;; BOOT button
  (symbol (lib_id "Switch:SW_Push") (at 193.04 121.92 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0002-0005-000000000001)
    (property "Reference" "SW1" (at 195.58 121.92 0))
    (property "Value" "BOOT" (at 190.5 121.92 90))
    (property "Footprint" "Button_Switch_SMD:SW_SPST_TL3342" (at 193.04 116.84 0))
    (property "LCSC" "C127509" (at 193.04 121.92 0))
    (pin "1" (uuid 10000001-0001-0002-0005-000000000011))
    (pin "2" (uuid 10000001-0001-0002-0005-000000000012))
  )

  ;; RESET button
  (symbol (lib_id "Switch:SW_Push") (at 127 96.52 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0002-0006-000000000001)
    (property "Reference" "SW2" (at 124.46 96.52 0))
    (property "Value" "RESET" (at 129.54 96.52 90))
    (property "Footprint" "Button_Switch_SMD:SW_SPST_TL3342" (at 127 91.44 0))
    (property "LCSC" "C127509" (at 127 96.52 0))
    (pin "1" (uuid 10000001-0001-0002-0006-000000000011))
    (pin "2" (uuid 10000001-0001-0002-0006-000000000012))
  )

  ;; ESP32 decoupling capacitor 100nF (close to 3V3 pin)
  (symbol (lib_id "Device:C") (at 154.94 78.74 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0002-0007-000000000001)
    (property "Reference" "C5" (at 157.48 76.2 0))
    (property "Value" "100nF" (at 157.48 81.28 0))
    (property "Footprint" "Capacitor_SMD:C_0805_2012Metric" (at 155.9052 82.55 0))
    (property "LCSC" "C49678" (at 154.94 78.74 0))
    (pin "1" (uuid 10000001-0001-0002-0007-000000000011))
    (pin "2" (uuid 10000001-0001-0002-0007-000000000012))
  )

  ;; ===== USB-UART SECTION =====
  ;; CP2102N
  (symbol (lib_id "Interface_USB:CP2102N-A02-GQFN28") (at 63.5 101.6 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0003-0001-000000000001)
    (property "Reference" "U3" (at 63.5 77.47 0))
    (property "Value" "CP2102N" (at 63.5 80.01 0))
    (property "Footprint" "Package_DFN_QFN:QFN-28-1EP_5x5mm_P0.5mm_EP3.35x3.35mm" (at 66.04 123.19 0))
    (property "LCSC" "C6568" (at 63.5 101.6 0))
    (pin "6" (uuid 10000001-0001-0003-0001-000000000016))
    (pin "3" (uuid 10000001-0001-0003-0001-000000000013))
    (pin "4" (uuid 10000001-0001-0003-0001-000000000014))
    (pin "5" (uuid 10000001-0001-0003-0001-000000000015))
    (pin "26" (uuid 10000001-0001-0003-0001-000000000026))
    (pin "25" (uuid 10000001-0001-0003-0001-000000000025))
    (pin "27" (uuid 10000001-0001-0003-0001-000000000027))
    (pin "28" (uuid 10000001-0001-0003-0001-000000000028))
    (pin "8" (uuid 10000001-0001-0003-0001-000000000018))
  )

  ;; ===== RELAY DRIVER SECTION =====
  ;; Relay driver resistor 1K
  (symbol (lib_id "Device:R") (at 220.98 99.06 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0004-0001-000000000001)
    (property "Reference" "R3" (at 223.012 99.06 0))
    (property "Value" "1K" (at 220.98 99.06 90))
    (property "Footprint" "Resistor_SMD:R_0805_2012Metric" (at 219.202 99.06 90))
    (property "LCSC" "C17513" (at 220.98 99.06 0))
    (pin "1" (uuid 10000001-0001-0004-0001-000000000011))
    (pin "2" (uuid 10000001-0001-0004-0001-000000000012))
  )

  ;; BC817 transistor
  (symbol (lib_id "Transistor_BJT:BC817") (at 233.68 99.06 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0004-0002-000000000001)
    (property "Reference" "Q1" (at 238.76 97.155 0))
    (property "Value" "BC817" (at 238.76 99.695 0))
    (property "Footprint" "Package_TO_SOT_SMD:SOT-23" (at 238.76 100.965 0))
    (property "LCSC" "C8664" (at 233.68 99.06 0))
    (pin "1" (uuid 10000001-0001-0004-0002-000000000011))
    (pin "2" (uuid 10000001-0001-0004-0002-000000000012))
    (pin "3" (uuid 10000001-0001-0004-0002-000000000013))
  )

  ;; Relay SRD-05VDC-SL-C
  (symbol (lib_id "Relay:SANYOU_SRD_Form_C") (at 251.46 83.82 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0004-0003-000000000001)
    (property "Reference" "K1" (at 260.35 75.93 0))
    (property "Value" "SRD-05VDC-SL-C" (at 260.35 78.47 0))
    (property "Footprint" "Relay_THT:Relay_SPDT_SANYOU_SRD_Series_Form_C" (at 260.35 80.01 0))
    (property "LCSC" "C35449" (at 251.46 83.82 0))
    (pin "1" (uuid 10000001-0001-0004-0003-000000000011))
    (pin "2" (uuid 10000001-0001-0004-0003-000000000012))
    (pin "3" (uuid 10000001-0001-0004-0003-000000000013))
    (pin "4" (uuid 10000001-0001-0004-0003-000000000014))
    (pin "5" (uuid 10000001-0001-0004-0003-000000000015))
  )

  ;; Flyback diode 1N4007 - cathode to +5V, anode to Q1:C (correct flyback orientation)
  (symbol (lib_id "Diode:1N4007") (at 236.22 78.74 270) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0004-0004-000000000001)
    (property "Reference" "D1" (at 232.41 78.74 90))
    (property "Value" "1N4007" (at 229.87 78.74 90))
    (property "Footprint" "Diode_THT:D_DO-41_SOD81_P10.16mm_Horizontal" (at 236.22 78.74 0))
    (property "LCSC" "C727110" (at 236.22 78.74 0))
    (pin "1" (uuid 10000001-0001-0004-0004-000000000011))
    (pin "2" (uuid 10000001-0001-0004-0004-000000000012))
  )

  ;; Output terminal block
  (symbol (lib_id "Connector_Generic:Conn_01x02") (at 274.32 83.82 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0004-0005-000000000001)
    (property "Reference" "J2" (at 274.32 78.74 0))
    (property "Value" "LOAD" (at 274.32 88.9 0))
    (property "Footprint" "Connector_Phoenix_MC:PhoenixContact_MC_1,5_2-G-3.81_1x02_P3.81mm_Horizontal" (at 274.32 83.82 0))
    (property "LCSC" "C8269" (at 274.32 83.82 0))
    (pin "1" (uuid 10000001-0001-0004-0005-000000000011))
    (pin "2" (uuid 10000001-0001-0004-0005-000000000012))
  )

  ;; ===== STATUS LEDS SECTION =====
  ;; Power LED (Green) - anode toward R4, cathode toward GND (forward bias)
  (symbol (lib_id "Device:LED") (at 127 48.26 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0005-0001-000000000001)
    (property "Reference" "D2" (at 127 44.45 0))
    (property "Value" "PWR_LED" (at 127 52.07 0))
    (property "Footprint" "LED_SMD:LED_0805_2012Metric" (at 127 48.26 0))
    (property "LCSC" "C2286" (at 127 48.26 0))
    (pin "1" (uuid 10000001-0001-0005-0001-000000000011))
    (pin "2" (uuid 10000001-0001-0005-0001-000000000012))
  )

  ;; Power LED resistor 1K
  (symbol (lib_id "Device:R") (at 139.7 48.26 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0005-0002-000000000001)
    (property "Reference" "R4" (at 139.7 45.72 0))
    (property "Value" "1K" (at 139.7 50.8 0))
    (property "Footprint" "Resistor_SMD:R_0805_2012Metric" (at 139.7 50.038 90))
    (property "LCSC" "C17513" (at 139.7 48.26 0))
    (pin "1" (uuid 10000001-0001-0005-0002-000000000011))
    (pin "2" (uuid 10000001-0001-0005-0002-000000000012))
  )

  ;; Relay status LED (Red) - anode toward R5, cathode toward GND (forward bias)
  (symbol (lib_id "Device:LED") (at 203.2 99.06 180) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0005-0003-000000000001)
    (property "Reference" "D3" (at 203.2 95.25 0))
    (property "Value" "RELAY_LED" (at 203.2 102.87 0))
    (property "Footprint" "LED_SMD:LED_0805_2012Metric" (at 203.2 99.06 0))
    (property "LCSC" "C2286" (at 203.2 99.06 0))
    (pin "1" (uuid 10000001-0001-0005-0003-000000000011))
    (pin "2" (uuid 10000001-0001-0005-0003-000000000012))
  )

  ;; ===== POWER SYMBOLS =====
  ;; GND symbols
  (symbol (lib_id "power:GND") (at 38.1 83.82 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0001-000000000001)
    (property "Reference" "#PWR01" (at 38.1 90.17 0))
    (property "Value" "GND" (at 38.1 88.9 0))
    (pin "1" (uuid 10000001-0001-0006-0001-000000000011))
  )

  (symbol (lib_id "power:GND") (at 91.44 50.8 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0002-000000000001)
    (property "Reference" "#PWR02" (at 91.44 57.15 0))
    (property "Value" "GND" (at 91.44 55.88 0))
    (pin "1" (uuid 10000001-0001-0006-0002-000000000011))
  )

  (symbol (lib_id "power:GND") (at 76.2 54.61 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0003-000000000001)
    (property "Reference" "#PWR03" (at 76.2 60.96 0))
    (property "Value" "GND" (at 76.2 59.69 0))
    (pin "1" (uuid 10000001-0001-0006-0003-000000000011))
  )

  (symbol (lib_id "power:GND") (at 106.68 54.61 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0004-000000000001)
    (property "Reference" "#PWR04" (at 106.68 60.96 0))
    (property "Value" "GND" (at 106.68 59.69 0))
    (pin "1" (uuid 10000001-0001-0006-0004-000000000011))
  )

  (symbol (lib_id "power:GND") (at 116.84 54.61 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0005-000000000001)
    (property "Reference" "#PWR05" (at 116.84 60.96 0))
    (property "Value" "GND" (at 116.84 59.69 0))
    (pin "1" (uuid 10000001-0001-0006-0005-000000000011))
  )

  (symbol (lib_id "power:GND") (at 165.1 120.65 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0006-000000000001)
    (property "Reference" "#PWR06" (at 165.1 127 0))
    (property "Value" "GND" (at 165.1 125.73 0))
    (pin "1" (uuid 10000001-0001-0006-0006-000000000011))
  )

  (symbol (lib_id "power:GND") (at 139.7 100.33 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0007-000000000001)
    (property "Reference" "#PWR07" (at 139.7 106.68 0))
    (property "Value" "GND" (at 139.7 105.41 0))
    (pin "1" (uuid 10000001-0001-0006-0007-000000000011))
  )

  (symbol (lib_id "power:GND") (at 193.04 127 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0008-000000000001)
    (property "Reference" "#PWR08" (at 193.04 133.35 0))
    (property "Value" "GND" (at 193.04 132.08 0))
    (pin "1" (uuid 10000001-0001-0006-0008-000000000011))
  )

  (symbol (lib_id "power:GND") (at 127 101.6 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0009-000000000001)
    (property "Reference" "#PWR09" (at 127 107.95 0))
    (property "Value" "GND" (at 127 106.68 0))
    (pin "1" (uuid 10000001-0001-0006-0009-000000000011))
  )

  (symbol (lib_id "power:GND") (at 63.5 124.46 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0010-000000000001)
    (property "Reference" "#PWR10" (at 63.5 130.81 0))
    (property "Value" "GND" (at 63.5 129.54 0))
    (pin "1" (uuid 10000001-0001-0006-0010-000000000011))
  )

  (symbol (lib_id "power:GND") (at 236.22 104.14 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0011-000000000001)
    (property "Reference" "#PWR11" (at 236.22 110.49 0))
    (property "Value" "GND" (at 236.22 109.22 0))
    (pin "1" (uuid 10000001-0001-0006-0011-000000000011))
  )

  (symbol (lib_id "power:GND") (at 119.38 48.26 270) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0012-000000000001)
    (property "Reference" "#PWR12" (at 113.03 48.26 0))
    (property "Value" "GND" (at 114.3 48.26 90))
    (pin "1" (uuid 10000001-0001-0006-0012-000000000011))
  )

  (symbol (lib_id "power:GND") (at 154.94 82.55 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0013-000000000001)
    (property "Reference" "#PWR13" (at 154.94 88.9 0))
    (property "Value" "GND" (at 154.94 87.63 0))
    (pin "1" (uuid 10000001-0001-0006-0013-000000000011))
  )

  ;; +3V3 symbols
  (symbol (lib_id "power:+3V3") (at 99.06 43.18 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0007-0001-000000000001)
    (property "Reference" "#PWR14" (at 99.06 46.99 0))
    (property "Value" "+3V3" (at 99.06 38.1 0))
    (pin "1" (uuid 10000001-0001-0007-0001-000000000011))
  )

  (symbol (lib_id "power:+3V3") (at 165.1 82.55 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0007-0002-000000000001)
    (property "Reference" "#PWR15" (at 165.1 86.36 0))
    (property "Value" "+3V3" (at 165.1 77.47 0))
    (pin "1" (uuid 10000001-0001-0007-0002-000000000011))
  )

  (symbol (lib_id "power:+3V3") (at 139.7 80.01 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0007-0003-000000000001)
    (property "Reference" "#PWR16" (at 139.7 83.82 0))
    (property "Value" "+3V3" (at 139.7 74.93 0))
    (pin "1" (uuid 10000001-0001-0007-0003-000000000011))
  )

  (symbol (lib_id "power:+3V3") (at 193.04 104.14 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0007-0004-000000000001)
    (property "Reference" "#PWR17" (at 193.04 107.95 0))
    (property "Value" "+3V3" (at 193.04 99.06 0))
    (pin "1" (uuid 10000001-0001-0007-0004-000000000011))
  )

  (symbol (lib_id "power:+3V3") (at 63.5 78.74 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0007-0005-000000000001)
    (property "Reference" "#PWR18" (at 63.5 82.55 0))
    (property "Value" "+3V3" (at 63.5 73.66 0))
    (pin "1" (uuid 10000001-0001-0007-0005-000000000011))
  )

  (symbol (lib_id "power:+3V3") (at 143.51 48.26 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0007-0006-000000000001)
    (property "Reference" "#PWR19" (at 149.86 48.26 0))
    (property "Value" "+3V3" (at 148.59 48.26 90))
    (pin "1" (uuid 10000001-0001-0007-0006-000000000011))
  )

  (symbol (lib_id "power:+3V3") (at 154.94 74.93 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0007-0007-000000000001)
    (property "Reference" "#PWR20" (at 154.94 78.74 0))
    (property "Value" "+3V3" (at 154.94 69.85 0))
    (pin "1" (uuid 10000001-0001-0007-0007-000000000011))
  )

  ;; +5V symbols
  (symbol (lib_id "power:+5V") (at 67.31 43.18 270) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0008-0001-000000000001)
    (property "Reference" "#PWR21" (at 73.66 43.18 0))
    (property "Value" "+5V" (at 72.39 43.18 90))
    (pin "1" (uuid 10000001-0001-0008-0001-000000000011))
  )

  (symbol (lib_id "power:+5V") (at 236.22 69.85 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0008-0002-000000000001)
    (property "Reference" "#PWR22" (at 236.22 73.66 0))
    (property "Value" "+5V" (at 236.22 64.77 0))
    (pin "1" (uuid 10000001-0001-0008-0002-000000000011))
  )

  ;; ===== ADDITIONAL COMPONENTS =====

  ;; Relay status LED resistor R5 - 1K (series with D3)
  (symbol (lib_id "Device:R") (at 191.77 99.06 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0005-0004-000000000001)
    (property "Reference" "R5" (at 191.77 96.52 0))
    (property "Value" "1K" (at 191.77 101.6 0))
    (property "Footprint" "Resistor_SMD:R_0805_2012Metric" (at 191.77 100.838 90))
    (property "LCSC" "C17513" (at 191.77 99.06 0))
    (pin "1" (uuid 10000001-0001-0005-0004-000000000011))
    (pin "2" (uuid 10000001-0001-0005-0004-000000000012))
  )

  ;; GND for D3 cathode
  (symbol (lib_id "power:GND") (at 210.82 99.06 270) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0014-000000000001)
    (property "Reference" "#PWR23" (at 204.47 99.06 0))
    (property "Value" "GND" (at 205.74 99.06 90))
    (pin "1" (uuid 10000001-0001-0006-0014-000000000011))
  )

  ;; GND for USB-C shield
  (symbol (lib_id "power:GND") (at 25.4 66.04 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0006-0015-000000000001)
    (property "Reference" "#PWR24" (at 25.4 72.39 0))
    (property "Value" "GND" (at 25.4 71.12 0))
    (pin "1" (uuid 10000001-0001-0006-0015-000000000011))
  )

  ;; +5V for VBUS sense on CP2102N
  (symbol (lib_id "power:+5V") (at 50.8 114.3 180) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000001-0001-0008-0003-000000000001)
    (property "Reference" "#PWR25" (at 50.8 110.49 0))
    (property "Value" "+5V" (at 50.8 118.11 0))
    (pin "1" (uuid 10000001-0001-0008-0003-000000000011))
  )

  ;; ===== NO CONNECT FLAGS =====
  ;; U3:DTR (unused - no auto-reset circuit in simplified design)
  (no_connect (at 76.2 93.98) (uuid 30000001-0001-0001-0001-000000000001))
  ;; U3:RTS (unused)
  (no_connect (at 76.2 96.52) (uuid 30000001-0001-0001-0002-000000000001))
  ;; K1:NC pin (relay normally-closed contact, unused)
  (no_connect (at 245.11 82.55) (uuid 30000001-0001-0001-0003-000000000001))

  ;; ===== WIRE CONNECTIONS =====

  ;; --- POWER SUPPLY SECTION ---
  ;; J1:VBUS to FB1:1 (USB 5V input to ferrite bead)
  (wire (pts (xy 38.1 43.18) (xy 59.69 43.18))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0001-0001-000000000001)
  )
  ;; +5V bus: FB1:2 to U2:VI (ferrite output through to regulator input)
  (wire (pts (xy 67.31 43.18) (xy 83.82 43.18))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0001-0002-000000000001)
  )
  ;; +5V bus tap down to C1:1 (input filter cap)
  (wire (pts (xy 76.2 43.18) (xy 76.2 46.99))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0001-0003-000000000001)
  )
  ;; +3V3 bus: U2:VO to C2/C3 area
  (wire (pts (xy 99.06 43.18) (xy 116.84 43.18))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0001-0004-000000000001)
  )
  ;; +3V3 bus tap down to C2:1 (output bulk cap)
  (wire (pts (xy 106.68 43.18) (xy 106.68 46.99))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0001-0005-000000000001)
  )
  ;; +3V3 bus tap down to C3:1 (output decoupling cap)
  (wire (pts (xy 116.84 43.18) (xy 116.84 46.99))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0001-0006-000000000001)
  )

  ;; --- USB DATA LINES ---
  ;; J1:D+ to U3:D+ (vertical run, same X coordinate)
  (wire (pts (xy 50.8 55.88) (xy 50.8 86.36))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0002-0001-000000000001)
  )
  ;; J1:D- to U3:D- (vertical run, same X coordinate)
  (wire (pts (xy 50.8 58.42) (xy 50.8 88.9))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0002-0002-000000000001)
  )
  ;; USB SHIELD to GND
  (wire (pts (xy 25.4 63.5) (xy 25.4 66.04))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0002-0003-000000000001)
  )
  ;; U3:VBUS sense to +5V
  (wire (pts (xy 50.8 111.76) (xy 50.8 114.3))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0002-0004-000000000001)
  )

  ;; --- UART CONNECTIONS (via net labels) ---
  (label "ESP_TX" (at 180.34 91.44 180)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 50000001-0001-0001-0001-000000000001)
  )
  (label "ESP_TX" (at 76.2 88.9 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 50000001-0001-0001-0002-000000000001)
  )
  (label "ESP_RX" (at 180.34 93.98 180)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 50000001-0001-0002-0001-000000000001)
  )
  (label "ESP_RX" (at 76.2 86.36 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 50000001-0001-0002-0002-000000000001)
  )

  ;; --- EN PIN CIRCUIT ---
  ;; R1:2 down to C4:1 (EN pullup to delay cap, vertical bus)
  (wire (pts (xy 139.7 87.63) (xy 139.7 92.71))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0003-0001-000000000001)
  )
  ;; EN branch: horizontal to U1:EN
  (wire (pts (xy 139.7 88.9) (xy 149.86 88.9))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0003-0002-000000000001)
  )
  ;; SW2:2 horizontal to EN bus
  (wire (pts (xy 127 91.44) (xy 139.7 91.44))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0003-0003-000000000001)
  )
  ;; Junctions on EN vertical bus
  (junction (at 139.7 88.9) (diameter 0) (color 0 0 0 0)
    (uuid 60000001-0001-0001-0001-000000000001)
  )
  (junction (at 139.7 91.44) (diameter 0) (color 0 0 0 0)
    (uuid 60000001-0001-0001-0002-000000000001)
  )

  ;; --- IO0 PIN CIRCUIT ---
  ;; R2:2 down to SW1:2 (IO0 pullup to boot button, vertical bus)
  (wire (pts (xy 193.04 111.76) (xy 193.04 116.84))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0004-0001-000000000001)
  )
  ;; IO0 branch: horizontal to U1:IO0
  (wire (pts (xy 193.04 114.3) (xy 180.34 114.3))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0004-0002-000000000001)
  )
  ;; Junction on IO0 vertical bus
  (junction (at 193.04 114.3) (diameter 0) (color 0 0 0 0)
    (uuid 60000001-0001-0002-0001-000000000001)
  )

  ;; --- RELAY DRIVER CIRCUIT ---
  ;; U1:IO4 up to y=95.25, then horizontal to R3:1 (routed above R5/D3 area)
  (wire (pts (xy 180.34 99.06) (xy 180.34 95.25))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0005-0001-000000000001)
  )
  (wire (pts (xy 180.34 95.25) (xy 220.98 95.25))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0005-0002-000000000001)
  )
  ;; R3:2 down and right to Q1:B
  (wire (pts (xy 220.98 102.87) (xy 220.98 105.41))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0005-0003-000000000001)
  )
  (wire (pts (xy 220.98 105.41) (xy 228.6 105.41))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0005-0004-000000000001)
  )
  (wire (pts (xy 228.6 105.41) (xy 228.6 99.06))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0005-0005-000000000001)
  )
  ;; Q1:C up to relay coil- junction node
  (wire (pts (xy 236.22 93.98) (xy 236.22 90.17))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0005-0006-000000000001)
  )
  ;; Relay coil- junction to K1:1
  (wire (pts (xy 236.22 90.17) (xy 251.46 90.17))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0005-0007-000000000001)
  )
  ;; D1:A (anode) up to relay coil- junction (flyback return path)
  (wire (pts (xy 236.22 82.55) (xy 236.22 90.17))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0005-0008-000000000001)
  )
  ;; Junction at relay coil- node (Q1:C, K1:1, D1:A all meet here)
  (junction (at 236.22 90.17) (diameter 0) (color 0 0 0 0)
    (uuid 60000001-0001-0003-0001-000000000001)
  )
  ;; D1:K (cathode) up to +5V
  (wire (pts (xy 236.22 69.85) (xy 236.22 74.93))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0005-0009-000000000001)
  )
  ;; +5V bus to K1:2 (coil+)
  (wire (pts (xy 236.22 77.47) (xy 251.46 77.47))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0005-0010-000000000001)
  )
  ;; Junction on +5V vertical at K1 coil+ height
  (junction (at 236.22 77.47) (diameter 0) (color 0 0 0 0)
    (uuid 60000001-0001-0003-0002-000000000001)
  )

  ;; --- RELAY CONTACTS TO OUTPUT ---
  ;; K1:COM to J2:1
  (wire (pts (xy 257.81 83.82) (xy 269.24 83.82))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0006-0001-000000000001)
  )
  ;; K1:NO to J2:2 (L-shape routing)
  (wire (pts (xy 245.11 85.09) (xy 245.11 86.36))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0006-0002-000000000001)
  )
  (wire (pts (xy 245.11 86.36) (xy 269.24 86.36))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0006-0003-000000000001)
  )

  ;; --- POWER LED CIRCUIT ---
  ;; R4:1 to D2:A (resistor output to LED anode)
  (wire (pts (xy 135.89 48.26) (xy 130.81 48.26))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0007-0001-000000000001)
  )
  ;; D2:K to GND (LED cathode to ground)
  (wire (pts (xy 123.19 48.26) (xy 119.38 48.26))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0007-0002-000000000001)
  )

  ;; --- RELAY STATUS LED CIRCUIT ---
  ;; U1:IO5 to R5:1 (L-shape: right then up)
  (wire (pts (xy 180.34 101.6) (xy 187.96 101.6))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0008-0001-000000000001)
  )
  (wire (pts (xy 187.96 101.6) (xy 187.96 99.06))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0008-0002-000000000001)
  )
  ;; R5:2 to D3:A (short hop to LED anode)
  (wire (pts (xy 195.58 99.06) (xy 199.39 99.06))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0008-0003-000000000001)
  )
  ;; D3:K to GND
  (wire (pts (xy 207.01 99.06) (xy 210.82 99.06))
    (stroke (width 0) (type default))
    (uuid 40000001-0001-0008-0004-000000000001)
  )

  ;; --- JUNCTIONS ON +5V BUS ---
  (junction (at 76.2 43.18) (diameter 0) (color 0 0 0 0)
    (uuid 60000001-0001-0004-0001-000000000001)
  )
  (junction (at 106.68 43.18) (diameter 0) (color 0 0 0 0)
    (uuid 60000001-0001-0004-0002-000000000001)
  )
  (junction (at 116.84 43.18) (diameter 0) (color 0 0 0 0)
    (uuid 60000001-0001-0004-0003-000000000001)
  )

  ;; Text annotations
  (text "ESP32 Simple IoT Switch\n\nSimplified design based on Jordan Lake engineering review.\nRemoves problematic CAN, current sensing, and switching converter.\nUSB-C powered, single relay output with WiFi/BLE control.\n\nKey improvements:\n- All ESP32 GND pins connected to main ground\n- Correct flyback diode orientation\n- Proper decoupling on ESP32 VCC\n- RC delay on EN pin for reliable startup\n- Pull-ups on boot/reset pins"
    (at 30.48 152.4 0)
    (effects (font (size 2.54 2.54)) (justify left top))
  )

  (text "POWER SUPPLY\nUSB 5V -> Ferrite -> AMS1117 -> 3.3V"
    (at 30.48 30.48 0)
    (effects (font (size 1.5 1.5)) (justify left top))
  )

  (text "USB-UART BRIDGE"
    (at 45.72 68.58 0)
    (effects (font (size 1.5 1.5)) (justify left top))
  )

  (text "ESP32-WROOM-32\nMain Controller"
    (at 152.4 68.58 0)
    (effects (font (size 1.5 1.5)) (justify left top))
  )

  (text "RELAY DRIVER\nGPIO4 -> 1K -> BC817 -> Relay"
    (at 210.82 68.58 0)
    (effects (font (size 1.5 1.5)) (justify left top))
  )

)
